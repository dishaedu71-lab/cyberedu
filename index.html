<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disha Computer Education LMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Poppins,Arial;background:linear-gradient(120deg,#020617,#0f172a,#1e3a8a);color:white;}
header{background:#020617;border-bottom:2px solid gold;position:sticky;top:0}
nav{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;}
nav h2{color:gold}
nav a{color:white;margin:0 10px;text-decoration:none;cursor:pointer}
nav a:hover{color:gold}
section{padding:60px 20px}
.hidden{display:none}
.hero{text-align:center;padding:90px 20px}
.hero h1{font-size:42px;color:gold}
.courses{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}
.course{background:#0f172a;padding:15px;border-radius:10px;text-align:center}
.card{background:white;color:black;max-width:520px;margin:20px auto;padding:20px;border-radius:10px}
input,textarea{width:100%;padding:10px;margin:8px 0}
button{padding:10px 20px;background:#2563eb;color:white;border:none;border-radius:5px}
.listBox{background:#0f172a;color:white;padding:10px;margin:5px;border-radius:5px}
#noticeBox{display:none;background:#fff3cd;color:#000;border-left:6px solid orange;padding:15px;border-radius:8px;margin:20px}
</style>
</head>

<body>

<header>
<nav>
<h2>Disha Computer</h2>
<div>
<a onclick="show('home')">Home</a>
<a onclick="show('login')">Login</a>
<a onclick="show('register')">Register</a>
<a onclick="adminLogin()">Admin</a>
</div>
</nav>
</header>

<!-- HOME -->
<section id="home">
<div class="hero">
<h1>Indiaâ€™s Trusted Computer Education</h1>
<p>Professional LMS â€¢ Online Exam â€¢ Certificates</p>
</div>

<div id="noticeBox">
<h3 id="nTitle"></h3>
<p id="nMsg"></p>
<small id="nDate"></small>
</div>

<div class="courses">
<div class="course">ðŸ’» ADCA</div>
<div class="course">ðŸ“˜ CCC</div>
<div class="course">ðŸŽ“ O-Level</div>
<div class="course">ðŸ“Š Tally Prime</div>
</div>
</section>

<!-- REGISTER -->
<section id="register" class="hidden">
<div class="card">
<h2>Register</h2>
<input id="rname" placeholder="Name">
<input id="remail" placeholder="Email">
<input id="rpass" type="password" placeholder="Password">
<button onclick="register()">Register</button>
</div>
</section>

<!-- LOGIN -->
<section id="login" class="hidden">
<div class="card">
<h2>Login</h2>
<input id="lemail" placeholder="Email">
<input id="lpass" type="password" placeholder="Password">
<p id="msg"></p>
<button onclick="login()">Login</button>
</div>
</section>

<!-- STUDENT -->
<section id="student" class="hidden">
<div class="card">
<h2>Dashboard</h2>
<p>Name: <b id="sname"></b></p>
<p>ID: <b id="sid"></b></p>
<button onclick="startExam()">Start Exam</button>
</div>
</section>

<!-- EXAM -->
<section id="exam" class="hidden">
<div class="card">
<h2>Online Exam</h2>
<p id="qtext"></p>
<div id="options"></div>
<button onclick="nextQuestion()">Next</button>
</div>
</section>

<!-- RESULT -->
<section id="result" class="hidden">
<div class="card">
<h2>Result</h2>
<p id="rmarks"></p>
</div>
</section>

<!-- ADMIN -->
<section id="admin" class="hidden">
<div class="card">
<h2>Admin Panel</h2>

<h3>Add Notice</h3>
<input id="ntitle" placeholder="Notice Title">
<textarea id="nmsg" placeholder="Notice Message"></textarea>
<button onclick="publishNotice()">Publish</button>

<hr>

<h3>Add Question</h3>
<textarea id="aq" placeholder="Question"></textarea>
<input id="ao1" placeholder="Option 1">
<input id="ao2" placeholder="Option 2">
<input id="ao3" placeholder="Option 3">
<input id="ao4" placeholder="Option 4">
<input id="ac" placeholder="Correct Option">
<button onclick="addQuestion()">Add Question</button>
</div>
</section>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue } 
from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyAmjBKWat_CnKgyqeoJbDCPEI5cc9n-dno",
authDomain: "disha-computer-education.firebaseapp.com",
databaseURL: "https://disha-computer-education-default-rtdb.firebaseio.com",
projectId: "disha-computer-education"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

/* NOTICE LIVE */
onValue(ref(db,"notice"),snap=>{
if(snap.exists()){
noticeBox.style.display="block";
nTitle.innerText=snap.val().title;
nMsg.innerText=snap.val().message;
nDate.innerText="ðŸ“… "+snap.val().date;
}
});

window.publishNotice=()=>{
set(ref(db,"notice"),{
title:ntitle.value,
message:nmsg.value,
date:new Date().toLocaleDateString()
});
alert("Notice Published");
}

/* QUESTIONS LIVE */
let questions=[];
onValue(ref(db,"questions"),snap=>{
questions=[];
snap.forEach(s=>questions.push(s.val()));
});

/* LMS LOGIC (PURANA STYLE) */
let users=[],currentUser=null,qi=0,score=0;

window.show=id=>{
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

window.register=()=>{
let id="DC"+Math.floor(Math.random()*9000);
users.push({id,name:rname.value,email:remail.value,pass:rpass.value});
alert("Registered: "+id);
show("login");
}

window.login=()=>{
let u=users.find(x=>x.email===lemail.value && x.pass===lpass.value);
if(!u){msg.innerText="Invalid";return;}
currentUser=u;
sname.innerText=u.name;
sid.innerText=u.id;
show("student");
}

window.startExam=()=>{
qi=0;score=0;
show("exam");
loadQ();
}

function loadQ(){
let q=questions[qi];
qtext.innerText=q.q;
options.innerHTML="";
[q.o1,q.o2,q.o3,q.o4].forEach(o=>{
options.innerHTML+=`<label><input type=radio name=ans value="${o}"> ${o}</label><br>`;
});
}

window.nextQuestion=()=>{
let s=document.querySelector("input[name=ans]:checked");
if(s && s.value===questions[qi].c)score++;
qi++;
qi>=questions.length?showResult():loadQ();
}

function showResult(){
show("result");
rmarks.innerText=`Marks: ${score}/${questions.length}`;
}

window.adminLogin=()=>{
let e=prompt("Admin Email");
let p=prompt("Admin Password");
if(e==="admin@disha.com" && p==="admin123") show("admin");
else alert("Wrong Admin");
}

show("home");
</script>
</body>
</html>
