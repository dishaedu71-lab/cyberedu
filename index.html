<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disha Computer LMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Poppins,Arial;
background:linear-gradient(120deg,#020617,#0f172a,#1e3a8a);
color:white;
}
a,button{cursor:pointer}
header{
background:#020617;
border-bottom:2px solid gold;
position:sticky;top:0;
}
nav{
display:flex;justify-content:space-between;align-items:center;
padding:15px 30px;
}
nav h2{color:gold}
nav a{color:white;margin:0 10px;text-decoration:none}
nav a:hover{color:gold}
section{padding:60px 20px}
.hidden{display:none}
h2{text-align:center;color:gold;margin-bottom:20px}

.hero{text-align:center;padding:80px 20px}
.hero h1{font-size:40px;color:gold}

.card{
background:white;color:black;
max-width:500px;margin:20px auto;padding:20px;
border-radius:10px;
}
input,select,textarea{
width:100%;padding:10px;margin:8px 0;
border:1px solid #ccc;border-radius:5px;
}
button{
padding:10px 20px;
background:#2563eb;color:white;border:none;border-radius:5px;
}
button:hover{background:#1e40af}

.courseBox{
background:#0f172a;padding:15px;margin:10px;border-radius:8px;
}
</style>
</head>
<body>

<header>
<nav>
<h2>Disha Computer</h2>
<div>
<a onclick="show('home')">Home</a>
<a onclick="show('login')">Student Login</a>
<a onclick="show('register')">Register</a>
<a onclick="adminLogin()">Admin</a>
<a onclick="logout()">Logout</a>
</div>
</nav>
</header>

<!-- HOME -->
<section id="home">
<div class="hero">
<h1>Welcome to Disha Computer Education</h1>
<p>Professional Computer Institute LMS</p>
</div>

<h2>Home Page Topics (Added by Admin)</h2>
<div id="homeTopics"></div>
</section>

<!-- REGISTER -->
<section id="register" class="hidden">
<div class="card">
<h2>Student Registration</h2>
<input id="rname" placeholder="Full Name">
<input id="remail" placeholder="Email">
<input id="rpass" type="password" placeholder="Password">
<button onclick="register()">Register</button>
</div>
</section>

<!-- LOGIN -->
<section id="login" class="hidden">
<div class="card">
<h2>Student Login</h2>
<input id="lemail" placeholder="Email">
<input id="lpass" type="password" placeholder="Password">
<p id="msg"></p>
<button onclick="login()">Login</button>
</div>
</section>

<!-- STUDENT DASH -->
<section id="student" class="hidden">
<div class="card">
<h2>Student Dashboard</h2>
<p>Name: <b id="sname"></b></p>
<p>ID: <b id="sid"></b></p>
<button onclick="startExam()">Start Exam</button>
</div>
</section>

<!-- EXAM -->
<section id="exam" class="hidden">
<div class="card">
<h2>Online Exam</h2>
<p id="examQ"></p>
<select id="examAns"></select>
<button onclick="submitExam()">Submit</button>
</div>
</section>

<!-- RESULT -->
<section id="result" class="hidden">
<div class="card">
<h2>Your Result</h2>
<p>Name: <b id="rname"></b></p>
<p>ID: <b id="rid"></b></p>
<p>Marks: <b id="rmarks"></b></p>
</div>
</section>

<!-- ADMIN PANEL -->
<section id="admin" class="hidden">
<div class="card">
<h2>Admin Panel</h2>

<h3>Add Home Page Topic</h3>
<textarea id="newTopic" placeholder="Write topic / photo link text"></textarea>
<button onclick="addTopic()">Add Topic</button>

<h3>Home Topics List</h3>
<div id="topicList"></div>

<hr>

<h3>Add Exam Question</h3>
<input id="qtext" placeholder="Question">
<input id="qopt1" placeholder="Option 1">
<input id="qopt2" placeholder="Option 2">
<input id="qcorrect" placeholder="Correct Option Text">
<button onclick="addQuestion()">Add Question</button>

<h3>Question Bank</h3>
<div id="questionList"></div>

<hr>

<h3>Student Results</h3>
<div id="resultList"></div>

</div>
</section>

<script>
// DATABASE
let users = JSON.parse(localStorage.getItem("users")) || [
{id:"ADMIN001",name:"Admin",email:"admin@disha.com",pass:"admin123",role:"admin"}
];
let questions = JSON.parse(localStorage.getItem("questions")) || [];
let results = JSON.parse(localStorage.getItem("results")) || [];
let topics = JSON.parse(localStorage.getItem("topics")) || [];

let currentUser=null;
let currentQuestion=null;

// SHOW SECTION
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
if(id==="home")loadTopics();
}

// REGISTER
function register(){
let id="DC"+Math.floor(1000+Math.random()*9000);
users.push({id,name:rname.value,email:remail.value,pass:rpass.value,role:"student"});
localStorage.setItem("users",JSON.stringify(users));
alert("Registered! Your ID: "+id);
show("login");
}

// LOGIN
function login(){
let u=users.find(x=>x.email===lemail.value && x.pass===lpass.value);
if(!u){msg.innerText="Invalid Login";return;}
currentUser=u;
show("student");
sname.innerText=u.name;
sid.innerText=u.id;
}

// ADMIN LOGIN
function adminLogin(){
let e=prompt("Admin Email");
let p=prompt("Admin Password");
let u=users.find(x=>x.email===e && x.pass===p && x.role==="admin");
if(!u){alert("Wrong Admin Login");return;}
currentUser=u;
show("admin");
loadAdminData();
}

// START EXAM
function startExam(){
if(questions.length==0){alert("No Questions Added Yet");return;}
currentQuestion=questions[Math.floor(Math.random()*questions.length)];
show("exam");
examQ.innerText=currentQuestion.q;
examAns.innerHTML="";
[currentQuestion.o1,currentQuestion.o2].forEach(o=>{
let op=document.createElement("option");
op.text=o; examAns.add(op);
});
}

// SUBMIT EXAM
function submitExam(){
let score = (examAns.value===currentQuestion.correct)?1:0;
results.push({name:currentUser.name,id:currentUser.id,marks:score});
localStorage.setItem("results",JSON.stringify(results));
show("result");
rname.innerText=currentUser.name;
rid.innerText=currentUser.id;
rmarks.innerText=score;
}

// ADMIN FUNCTIONS
function addQuestion(){
questions.push({
q:qtext.value,
o1:qopt1.value,
o2:qopt2.value,
correct:qcorrect.value
});
localStorage.setItem("questions",JSON.stringify(questions));
loadAdminData();
}

function deleteQuestion(i){
questions.splice(i,1);
localStorage.setItem("questions",JSON.stringify(questions));
loadAdminData();
}

function loadAdminData(){
questionList.innerHTML="";
questions.forEach((q,i)=>{
questionList.innerHTML+=`<div class='courseBox'>${q.q}
<button onclick="deleteQuestion(${i})">Delete</button></div>`;
});

resultList.innerHTML="";
results.forEach((r,i)=>{
resultList.innerHTML+=`<div class='courseBox'>${r.name} (${r.id}) = ${r.marks}
<button onclick="deleteResult(${i})">Delete</button></div>`;
});

topicList.innerHTML="";
topics.forEach((t,i)=>{
topicList.innerHTML+=`<div class='courseBox'>${t}
<button onclick="deleteTopic(${i})">Delete</button></div>`;
});
}

// DELETE RESULT
function deleteResult(i){
results.splice(i,1);
localStorage.setItem("results",JSON.stringify(results));
loadAdminData();
}

// HOME TOPIC
function addTopic(){
topics.push(newTopic.value);
localStorage.setItem("topics",JSON.stringify(topics));
loadAdminData();
loadTopics();
}

function deleteTopic(i){
topics.splice(i,1);
localStorage.setItem("topics",JSON.stringify(topics));
loadAdminData();
loadTopics();
}

function loadTopics(){
homeTopics.innerHTML="";
topics.forEach(t=>{
homeTopics.innerHTML+=`<div class='courseBox'>${t}</div>`;
});
}

// LOGOUT
function logout(){
currentUser=null;
show("home");
}

// DEFAULT
show("home");
</script>

</body>
</html>

