<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Disha Computer Education | INSANE LMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Poppins,Arial;background:#0f172a;color:white}
header{background:#020617;padding:20px;text-align:center}
nav a{color:#facc15;margin:10px;font-weight:bold;cursor:pointer}
section{padding:30px;text-align:center}
.hidden{display:none}
.card{background:white;color:black;padding:20px;margin:20px auto;width:500px;border-radius:12px}
input,select{width:90%;padding:8px;margin:5px}
button{padding:8px 18px;background:#2563eb;color:white;border:none;border-radius:6px}
button:hover{background:#1e40af}
.timer{color:red;font-weight:bold}
.cert{border:6px double black;padding:30px;font-family:Georgia}
footer{background:#020617;padding:15px}
</style>
</head>

<body>

<header>
<h1>Disha Computer Education</h1>
<p>INSANE LMS – Exam | Admin | Certificate</p>
<nav>
<a onclick="show('home')">Home</a>
<a onclick="show('login')">Login</a>
<a onclick="show('register')">Register</a>
<a onclick="dashboard()">Dashboard</a>
<a onclick="startExam()">Exam</a>
</nav>
</header>

<section id="home">
<h2>Professional Learning Management System</h2>
<p>Admin Controlled • Secure • Advanced</p>
</section>

<section id="register" class="hidden">
<h2>Student Registration</h2>
<div class="card">
<input id="rEmail" placeholder="Email">
<input id="rPass" placeholder="Password">
<button onclick="register()">Register</button>
</div>
</section>

<section id="login" class="hidden">
<h2>Login</h2>
<div class="card">
<input id="email" placeholder="Email">
<input id="pass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p id="msg"></p>
</div>
</section>

<section id="dash" class="hidden">
<h2>Dashboard</h2>
<p id="roleTxt"></p>

<div class="card" id="adminPanel">
<h3>Admin MCQ Control</h3>

<select id="cat">
<option>Basic Computer</option>
<option>HTML</option>
<option>JavaScript</option>
</select>

<input id="ques" placeholder="Question">
<input id="o1" placeholder="Option A">
<input id="o2" placeholder="Option B">
<select id="ans">
<option value="0">Option A Correct</option>
<option value="1">Option B Correct</option>
</select>

<button onclick="addQ()">Add Question</button>
<div id="qlist"></div>
</div>

<div class="card" id="studentPanel">
<h3>Result</h3>
<div id="result"></div>
<button onclick="printResult()">Result PDF</button>
<button onclick="printCert()">Print Certificate</button>
</div>

<button onclick="logout()">Logout</button>
</section>

<section id="exam" class="hidden">
<h2>Online MCQ Exam</h2>
<p class="timer">Time: <span id="t">15</span>s</p>
<h3 id="q"></h3>
<div id="opts"></div>
</section>

<footer>© 2026 Disha Computer Education</footer>

<script>
// USERS
let users=JSON.parse(localStorage.getItem("users"))||[
{email:"admin@disha.com",pass:"admin123",role:"admin"}
];

// QUESTIONS
let questions=JSON.parse(localStorage.getItem("questions"))||[
{c:"Basic Computer",q:"CPU full form?",o:["Central Processing Unit","Computer Power Unit"],a:0},
{c:"HTML",q:"HTML stands for?",o:["Hyper Text Markup Language","High Text Machine"],a:0},
{c:"JavaScript",q:"JS is?",o:["Programming","OS"],a:0}
];

// NAV
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

// REGISTER
function register(){
users.push({email:rEmail.value,pass:rPass.value,role:"student"});
localStorage.setItem("users",JSON.stringify(users));
alert("Registered");
}

// LOGIN
function login(){
let u=users.find(x=>x.email===email.value && x.pass===pass.value);
if(!u){msg.innerText="Invalid";return;}
localStorage.setItem("user",u.email);
localStorage.setItem("role",u.role);
dashboard();
}

// DASHBOARD
function dashboard(){
let r=localStorage.getItem("role");
if(!r){show("login");return;}
show("dash");
roleTxt.innerText="Role: "+r;
adminPanel.style.display=r==="admin"?"block":"none";
studentPanel.style.display=r==="student"?"block":"none";
renderQ();
}

// LOGOUT
function logout(){localStorage.clear();show("home");}

// ADMIN ADD / DELETE
function addQ(){
questions.push({
c:cat.value,q:ques.value,o:[o1.value,o2.value],a:Number(ans.value)
});
localStorage.setItem("questions",JSON.stringify(questions));
renderQ();
}
function delQ(i){
questions.splice(i,1);
localStorage.setItem("questions",JSON.stringify(questions));
renderQ();
}
function renderQ(){
qlist.innerHTML="";
questions.forEach((x,i)=>{
qlist.innerHTML+=`<p>${x.c}: ${x.q} <button onclick="delQ(${i})">❌</button></p>`;
});
}

// EXAM
let exam=[],i=0,score=0,time=15,timer;
function startExam(){
exam=[...questions].sort(()=>0.5-Math.random()).slice(0,20);
i=0;score=0;
show("exam");next();
}
function next(){
if(i>=exam.length){finish();return;}
time=15;t.innerText=time;
q.innerText=exam[i].q;
opts.innerHTML="";
exam[i].o.forEach((x,idx)=>{
opts.innerHTML+=`<button onclick="ans(${idx})">${x}</button><br><br>`;
});
timer=setInterval(()=>{
time--;t.innerText=time;
if(time<=0){clearInterval(timer);i++;next();}
},1000);
}
function ans(a){
clearInterval(timer);
if(a===exam[i].a)score+=1;
else score-=0.25;
i++;next();
}
function finish(){
show("dash");
let res=`Score: ${score}<br>Status: ${score>=10?"PASS":"FAIL"}`;
result.innerHTML=res;
localStorage.setItem("res",res);
if(score>=10){
localStorage.setItem("cert","CERT"+Date.now());
}
}

// PDF
function printResult(){
let w=window.open("");
w.document.write("<h2>Result</h2>"+localStorage.getItem("res"));
w.print();
}

// CERTIFICATE WITH QR
function printCert(){
let id=localStorage.getItem("cert");
let name=localStorage.getItem("user");
let qr=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${id}-${name}`;
let w=window.open("");
w.document.write(`
<div class='cert'>
<h1>Disha Computer Education</h1>
<h2>Certificate of Achievement</h2>
<p>This certifies that</p>
<h2>${name}</h2>
<p>has passed the examination</p>
<p>Certificate ID: ${id}</p>
<img src="${qr}">
</div>
`);
w.print();
}
</script>
</body>
</html>
