<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disha Computer Education LMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Poppins;
color:white;
background:linear-gradient(-45deg,#020617,#7f1d1d,#020617,#991b1b);
background-size:400% 400%;
animation:bgmove 12s ease infinite;
}
@keyframes bgmove{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}
header{background:#7f1d1d;border-bottom:2px solid gold;position:sticky;top:0;z-index:99}
nav{display:flex;justify-content:space-between;align-items:center;padding:15px 30px}
nav h2{color:gold}
nav a{color:white;margin:0 10px;cursor:pointer;text-decoration:none}
nav a:hover{color:gold}
section{padding:60px 20px}
.hidden{display:none}
h2{text-align:center;color:gold;margin-bottom:20px}
.hero{text-align:center;padding:90px 20px}
.hero h1{font-size:42px;color:gold}
.courses{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}
.course{background:#0f172a;padding:15px;border-radius:10px;text-align:center}
.card{
background:white;color:black;max-width:520px;
margin:20px auto;padding:20px;border-radius:10px
}
input,textarea{
width:100%;padding:10px;margin:8px 0;
border-radius:5px;border:1px solid #ccc
}
button{
padding:10px 20px;background:#b91c1c;color:white;
border:none;border-radius:5px;cursor:pointer;margin:5px
}
button:hover{background:#7f1d1d}
.listBox{background:#0f172a;color:white;padding:10px;margin:8px;border-radius:5px}
.notice{background:#fde047;color:black;padding:10px;border-radius:6px;margin:8px}
</style>
</head>

<body>

<header>
<nav>
<h2>Disha Computer</h2>
<div>
<a onclick="show('home')">Home</a>
<a onclick="show('courses')">Courses</a>
<a onclick="show('about')">About</a>
<a onclick="show('login')">Student Login</a>
<a onclick="show('register')">Register</a>
<a onclick="adminLogin()">Admin</a>
<a onclick="logout()">Logout</a>
</div>
</nav>
</header>

<section id="home">
<div class="hero">
<h1>Indiaâ€™s Trusted Computer Education</h1>
<p>Online Exam â€¢ Certificate â€¢ LMS</p>
</div>

<h2>ðŸ“¢ Admin Notice</h2>
<div id="noticeBox"></div>
</section>

<section id="courses" class="hidden">
<h2>Our Courses</h2>
<div class="courses">
<div class="course">ADCA</div>
<div class="course">CCC</div>
<div class="course">O-Level</div>
<div class="course">Tally Prime</div>
</div>
<div id="courseList"></div>
</section>

<section id="about" class="hidden">
<h2>Why Choose Us</h2>
<div class="courses">
<div class="course">100% Practical</div>
<div class="course">Online Exam</div>
<div class="course">Certificate</div>
<div class="course">Job Oriented</div>
</div>
</section>

<section id="register" class="hidden">
<div class="card">
<h2>Student Registration</h2>
<input id="rname" placeholder="Name">
<input id="remail" placeholder="Email">
<input id="rpass" type="password" placeholder="Password">
<button onclick="register()">Register</button>
</div>
</section>

<section id="login" class="hidden">
<div class="card">
<h2>Student Login</h2>
<input id="lemail" placeholder="Email">
<input id="lpass" type="password" placeholder="Password">
<p id="msg"></p>
<button onclick="login()">Login</button>
</div>
</section>

<section id="student" class="hidden">
<div class="card">
<h2>Student Dashboard</h2>
<p>Name: <b id="sname"></b></p>
<p>ID: <b id="sid"></b></p>
<input id="examCodeInput" placeholder="Enter Exam Code">
<button onclick="verifyExamCode()">Start Exam</button>
</div>
</section>

<section id="exam" class="hidden">
<div class="card">
<h2>Online Exam</h2>
<p>Time Left: <b id="timer">60:00</b></p>
<p id="qtext"></p>
<div id="options"></div>
<button onclick="prevQuestion()">Back</button>
<button onclick="nextQuestion()">Next</button>
</div>
</section>

<section id="result" class="hidden">
<div class="card">
<h2>Result</h2>
<p id="rmarks"></p>
</div>
</section>

<section id="admin" class="hidden">
<div class="card">
<h2>Admin Panel</h2>

<input id="examCodeSet" placeholder="Set Exam Code">
<button onclick="setExamCode()">Update Exam Code</button>

<hr>

<textarea id="noticeText" placeholder="Admin Notice"></textarea>
<button onclick="addNotice()">Publish Notice</button>

<hr>

<input id="cname" placeholder="Course Name">
<input id="cfee" placeholder="Course Fees">
<textarea id="csyll" placeholder="Course Syllabus"></textarea>
<button onclick="addCourse()">Add Course</button>

<hr>

<textarea id="aq" placeholder="Question"></textarea>
<input id="ao1" placeholder="Option 1">
<input id="ao2" placeholder="Option 2">
<input id="ao3" placeholder="Option 3">
<input id="ao4" placeholder="Option 4">
<input id="ac" placeholder="Correct Option (1-4)">
<button onclick="addQuestion()">Save Question</button>

<h3>Question Bank</h3>
<div id="questionList"></div>
</div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove, set } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

const app = initializeApp({
apiKey: "AIzaSyAmjBKWat_CnKgyqeoJbDCPEI5cc9n-dno",
databaseURL: "https://disha-computer-education-default-rtdb.firebaseio.com"
});
const db = getDatabase(app);

let users=JSON.parse(localStorage.getItem("users"))||[];
let questions=[], answers={}, index=0, timerInt, currentUser=null;

window.show=id=>{
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
};

window.register=()=>{
if(!rname.value||!remail.value||!rpass.value) return alert("Fill all");
users.push({name:rname.value,email:remail.value,pass:rpass.value});
localStorage.setItem("users",JSON.stringify(users));
alert("Registered");show("login");
};

window.login=()=>{
let u=users.find(x=>x.email===lemail.value&&x.pass===lpass.value);
if(!u) return msg.innerText="Invalid Login";
currentUser=u;
sname.innerText=u.name;
sid.innerText=u.email;
show("student");
};

window.verifyExamCode=()=>{
onValue(ref(db,"examCode"),snap=>{
if(examCodeInput.value===snap.val()) startExam();
else alert("Wrong Exam Code");
},{onlyOnce:true});
};

function startExam(){
index=0;answers={};let t=3600;
timerInt=setInterval(()=>{
let m=Math.floor(t/60),s=t%60;
timer.innerText=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
if(--t<0){clearInterval(timerInt);showResult();}
},1000);
show("exam");loadQ();
}

function loadQ(){
let q=questions[index];
qtext.innerText=(index+1)+". "+q.q;
options.innerHTML="";
[q.o1,q.o2,q.o3,q.o4].forEach((o,i)=>{
options.innerHTML+=`
<label><input type="radio" name="ans" value="${i+1}" ${answers[index]==i+1?"checked":""}> ${o}</label><br>`;
});
}

window.nextQuestion=()=>{
let s=document.querySelector("input[name=ans]:checked");
if(s) answers[index]=+s.value;
index<questions.length-1?(index++,loadQ()):showResult();
};
window.prevQuestion=()=>{if(index>0){index--;loadQ();}};

function showResult(){
clearInterval(timerInt);
let correct=0,attempted=0;
questions.forEach((q,i)=>{
if(answers[i]){attempted++;if(answers[i]===q.c) correct++;}
});
rmarks.innerHTML=`Total: ${questions.length}<br>Attempted: ${attempted}<br>Correct: ${correct}<br>Wrong: ${attempted-correct}`;
show("result");
}

onValue(ref(db,"questions"),snap=>{
questions=[];questionList.innerHTML="";
snap.forEach(c=>{
let q=c.val();q.id=c.key;questions.push(q);
questionList.innerHTML+=`<div class="listBox">${q.q}
<button onclick="delQ('${q.id}')">Delete</button></div>`;
});
});

window.addQuestion=()=>{
if(!aq.value||!ao1.value||!ao2.value||!ao3.value||!ao4.value||!ac.value) return;
push(ref(db,"questions"),{q:aq.value,o1:ao1.value,o2:ao2.value,o3:ao3.value,o4:ao4.value,c:+ac.value});
alert("Question Added");
};

window.delQ=id=>remove(ref(db,"questions/"+id));

window.addNotice=()=>{
push(ref(db,"notice"),{text:noticeText.value});
noticeText.value="";
};

onValue(ref(db,"notice"),snap=>{
noticeBox.innerHTML="";
snap.forEach(n=>{
noticeBox.innerHTML+=`<div class="notice">${n.val().text}</div>`;
});
});

window.addCourse=()=>{
push(ref(db,"courses"),{name:cname.value,fee:cfee.value,syll:csyll.value});
cname.value=cfee.value=csyll.value="";
};

onValue(ref(db,"courses"),snap=>{
courseList.innerHTML="";
snap.forEach(c=>{
let v=c.val();
courseList.innerHTML+=`
<div class="course">
<h3>${v.name}</h3>
<p>Fees: ${v.fee}</p>
<p>${v.syll}</p>
<button onclick="remove(ref(db,'courses/${c.key}'))">Delete</button>
</div>`;
});
});

window.setExamCode=()=>{
set(ref(db,"examCode"),examCodeSet.value);
alert("Exam Code Updated");
};

window.adminLogin=()=>{
let e=prompt("Admin Email"),p=prompt("Password");
if(e==="admin@disha.com"&&p==="admin123") show("admin");
else alert("Wrong Admin Login");
};

window.logout=()=>{currentUser=null;show("home");};
show("home");
</script>

</body>
</html>
